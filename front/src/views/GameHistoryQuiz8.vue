<template>
  <div class="game container-lg">
    <h2 class="game__title heading h1">Histoire</h2>
    <p class="game__subtitle">Île 8</p>
    <div class="game-quiz__wrap-content">

      <div class="game-quiz__traking">
        <div class="game-quiz__traking-item active">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
        <div class="game-quiz__traking-item">
          <svg class="game-quiz__tracking-true" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#359d9e" d="M9,2a7,7,0,1,0,7,7A7.021,7.021,0,0,0,9,2M7.6,12.5,4.1,9l.987-.987L7.6,10.519l5.313-5.313L13.9,6.2Z" transform="translate(-2 -2)"/></svg>
          <svg class="game-quiz__tracking-false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><defs></defs><path fill="#0e2e41" d="M9,2A7,7,0,1,1,2,9,6.994,6.994,0,0,1,9,2m2.513,3.5L9,8.013,6.487,5.5,5.5,6.487,8.013,9,5.5,11.513l.987.987L9,9.987,11.513,12.5l.987-.987L9.987,9,12.5,6.487Z" transform="translate(-2 -2)"/></svg>
        </div>
      </div>

      <div class="game-quiz__items">

        <div class="game-quiz__item active" data-quiz-nb="1">
          <p class="game-quiz__item-question">1. Quelle affirmation correspond le mieux à la définition des microplastiques&nbsp;?</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Un microplastique est une particule de plastique de taille inférieure à 5mm</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Un microplastique est issu de la fragmentation des gros déchets</p>
            </div>
            <div class="game-quiz__item-answer" data-res="C" @click="quizCheckResponse('C')">
              <p class="game-quiz__item-answer-landmark">C</p>
              <p class="game-quiz__item-answer-txt">Un microplastique est une particule de plastique de taille inférieure à 5mm. Ces particules peuvent être présentes sous forme de microbilles dans les cosmétiques, libérées sous forme de microfibres lors du lavage de nos vêtements synthétiques, ou peuvent être issues de la fragmentation des gros déchets.</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="2">
          <p class="game-quiz__item-question">2. Quelle quantité de déchet est produite dans le monde chaque année&nbsp;?</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Moins de 1 milliard</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Plus de 2 milliards</p>
            </div>
            <div class="game-quiz__item-answer" data-res="C" @click="quizCheckResponse('C')">
              <p class="game-quiz__item-answer-landmark">C</p>
              <p class="game-quiz__item-answer-txt">Plus de 4 milliards</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="3">
          <p class="game-quiz__item-question">3. Quelle quantité de déchets plastiques est rejetée en mer chaque année&nbsp;?</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">500 000</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Plus de 6 millions</p>
            </div>
            <div class="game-quiz__item-answer" data-res="C" @click="quizCheckResponse('C')">
              <p class="game-quiz__item-answer-landmark">C</p>
              <p class="game-quiz__item-answer-txt">300 millions</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="4">
          <p class="game-quiz__item-question">4. Quelle proportion de ces déchets plastiques vient de la terre&nbsp;?</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">10%</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">50%</p>
            </div>
            <div class="game-quiz__item-answer" data-res="C" @click="quizCheckResponse('C')">
              <p class="game-quiz__item-answer-landmark">C</p>
              <p class="game-quiz__item-answer-txt">Plus de 80%</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="5">
          <p class="game-quiz__item-question">5. Un déchet jeté par terre va se retrouver dans les cours d'eau ou en mer.</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Vrai</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Faux</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="6">
          <p class="game-quiz__item-question">6. Les microplastiques peuvent servir de nouvel habitat aux organismes aquatiques.</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Vrai</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Faux</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="7">
          <p class="game-quiz__item-question">7. Si cela est vrai, cela représente-t-il un risque pour l'écosystème&nbsp;?</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Oui</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Non</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="8">
          <p class="game-quiz__item-question">8. Les microplastiques peuvent accumuler des polluants chimiques comme les pesticides, mais peuvent-ils eux même en libérer&nbsp;?</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Oui</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Non</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="9">
          <p class="game-quiz__item-question">9. Dans la chaîne alimentaire, ces polluants sont ensuite&nbsp;:</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Éliminés</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Accumulés, mais sans conséquences</p>
            </div>
            <div class="game-quiz__item-answer" data-res="C" @click="quizCheckResponse('C')">
              <p class="game-quiz__item-answer-landmark">C</p>
              <p class="game-quiz__item-answer-txt">Bioaccumulés et libérés dans l'organisme</p>
            </div>
          </div>
        </div>

        <div class="game-quiz__item" data-quiz-nb="10">
          <p class="game-quiz__item-question">10. Comment sont collectés les échantillons de microplastiques à la surface de l'eau&nbsp;?</p>
          <div class="game-quiz__item-answers">
            <div class="game-quiz__item-answer" data-res="A" @click="quizCheckResponse('A')">
              <p class="game-quiz__item-answer-landmark">A</p>
              <p class="game-quiz__item-answer-txt">Avec un seau</p>
            </div>
            <div class="game-quiz__item-answer" data-res="B" @click="quizCheckResponse('B')">
              <p class="game-quiz__item-answer-landmark">B</p>
              <p class="game-quiz__item-answer-txt">Avec une pompe</p>
            </div>
            <div class="game-quiz__item-answer" data-res="C" @click="quizCheckResponse('C')">
              <p class="game-quiz__item-answer-landmark">C</p>
              <p class="game-quiz__item-answer-txt">A l'aide d'un filet Manta</p>
            </div>
          </div>
        </div>

      </div>

      <div class="game-quiz__actions">
        <div class="game-quiz__wrap-prev-exit">
          <button class="game-quiz__prev-btn btn btn-second" data-quiz-prev @click="quizPrev()">Question précédente</button>
          <router-link to="/game/history" class="game-quiz__exit-btn btn">Quitter le quiz</router-link>
        </div>
        <div class="game-quiz__wrap-next">
          <button class="game-quiz__next-btn btn btn-main active" data-quiz-next @click="quizNext()">Question suivante</button>
          <router-link to="/game/history2" class="game-quiz__validate-btn btn btn-main">Terminer le quiz</router-link>
        </div>
      </div>      

    </div>
  </div>
</template>

<script>

  export default {
    name: "Game",
    components: {},
    data(){
      return {
        quizTrackNumber: 1,
        quizTotalQuestion: 10,
        quizAnswers: [
          "A",
          "C",
          "B",
          "C",
          "A",
          "B",
          "B",
          "A",
          "A",
          "B"
        ]
      }
    },
    methods:{
      quizCheckResponse(resSelected) {

        let qNB = this.quizTrackNumber;
        let goodAnswer = this.quizAnswers[qNB-1];

        document.querySelector(`.game-quiz__item.active [data-res=${resSelected}]`).classList.add('selected');
        document.querySelector(`.game-quiz__item.active [data-res=${goodAnswer}]`).classList.add('true');
        document.querySelectorAll('.game-quiz__item.active .game-quiz__item-answer').forEach(el => {
          el.classList.add('disabled');
          if(el.getAttribute('data-res') != goodAnswer) {
            el.classList.add('false');
          }
        });

        // upadte tracking
        document.querySelectorAll('.game-quiz__traking-item').forEach((el, index) => {
          if(qNB == (index+1)) {
            if(goodAnswer == resSelected) {
              el.classList.add('true');
            } else {
              el.classList.add('false');
            }
          }
        })

      },
      quizNext() {
        let qNB = this.quizTrackNumber;

        document.querySelector(`.game-quiz__item.active[data-quiz-nb='${qNB}']`).classList.remove('active');
        document.querySelector(`.game-quiz__item[data-quiz-nb='${qNB+1}']`).classList.add('active');

        this.quizTrackNumber++;
        this.updateQuiz()
      },
      quizPrev() {
        let qNB = this.quizTrackNumber;

        document.querySelector(`.game-quiz__item.active[data-quiz-nb='${qNB}']`).classList.remove('active');
        document.querySelector(`.game-quiz__item[data-quiz-nb='${qNB-1}']`).classList.add('active');

        this.quizTrackNumber--;
        this.updateQuiz()
      },
      updateQuiz() {
        let qNB = this.quizTrackNumber;

        if(qNB > 1) {
          document.querySelector('[data-quiz-prev]').classList.add('active');
        } else {
          document.querySelector('[data-quiz-prev]').classList.remove('active');
        }

        if(qNB == this.quizTotalQuestion) {
          document.querySelector('.game-quiz__next-btn').classList.remove('active');
          document.querySelector('.game-quiz__validate-btn').classList.add('active');
        } else {
          document.querySelector('.game-quiz__next-btn').classList.add('active');
          document.querySelector('.game-quiz__validate-btn').classList.remove('active');
        }

        document.querySelectorAll('.game-quiz__traking-item').forEach((el, index) => {
          el.classList.remove('active');
          if(qNB == (index+1)) {
            el.classList.add('active');
          }
        })
      }
    },

    created(){
    },
    mounted(){},
    destroyed(){}
  };

</script>